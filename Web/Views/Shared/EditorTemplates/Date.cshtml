
@model DateTime?


@{
    string datepickerId = ViewData.TemplateInfo.GetFullHtmlFieldId("");
    string datepickerName = ViewData.TemplateInfo.GetFullHtmlFieldName("");
    string datepickerValue = DateTime.Now.ToString("yyyy-MM-dd");


}

<head>
    <link rel="stylesheet" href="~/Content/jquery-timepicker/jquery.timepicker.css">
    @Styles.Render("~/Content/css")

</head>







@using (Html.BeginForm("SelectDate", "ChargesAdmin", FormMethod.Post))
{

    <div class="">
        <div class="mb-6">
            <label class="block mb-2 text-sm font-medium text-gray-900">Select a Date</label>
            <input type="text" id="@datepickerId" name="@datepickerName" value="@datepickerValue" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg" readonly />
        </div>


        <div class="flex">

            <div class="mb-8">
                <input id="selectDate" type="submit"  value="Select Date" class="font-medium rounded-lg text-sm px-5 py-2.5 text-center btn-green-color shadow" />
            </div>

        </div>
    </div>

}






    <script src="~/Scripts/JQuery/jquery.js"></script>
    @*Datatables*@
    <!--<script src="~/Content/DataTable/js/jquery.dataTables.min.js"></script>
    <script src="~/Content/DataTable/js/dataTables.responsive.min.js"></script>
    <script src="~/Content/DataTable/checkbox/dataTables.checkboxes.min.js"></script>-->

    <script>
    //$(document).ready(function () {

    //    var table = $('#example').DataTable({
    //        responsive: true,
    //        'columnDefs': [
    //            {
    //                'targets': 0,
    //                'checkboxes': {
    //                    'selectRow': true
    //                }
    //            }
    //        ]

    //    })
    //        .columns.adjust()
    //        .responsive.recalc();
    //});


    $(function () {
        $("#@datepickerId").datepicker();
    });


    function SelectDate() {

        var data = {
            date : $("#@datepickerId").val()
        };



        $.ajax({
            url: "/ChargesAdmin/DataTables", // Replace with the URL of the server-side action to get the selected date
            type: "GET",
            data: data,
            success: function (response) {

                console.log(response);

                $("#myPartialView").html(response);

                //console.log(Object.keys(response).length);

                //var html;

                //for (var i = 0; i < Object.keys(response).length; i++) {

                //    html += `<tr class="text - center">`+
                //        `<th>`+

                //        + `</th>` +
                //        `<th>` +
                //            `test`
                //        + `</th>` +
                //        `<th>` +
                //            `test`
                //        + `</th>` +
                //        `<th>` +
                //            `test`
                //        + `</th>`

                //    +`</tr>`
                //}

                //$("#insertData").html(html);


            },
            error: function (xhr, textStatus, errorThrown) {
                console.log(xhr)
                console.log(textStatus)
                console.log(errorThrown)
            }
        });

        $("#@datepickerId").prop("disabled", true);
        $("#changeDate").removeClass("hidden");
        $("#selectDate").addClass("hidden");

        $("#tableHidden").removeClass("hidden");



    }

    function ChangeDate() {
        $("#@datepickerId").prop("disabled", false);
        $("#changeDate").addClass("hidden");
        $("#selectDate").removeClass("hidden");
    }

    function ShowTable() {
        $(document).ready(function () {

            var table = $('#example').DataTable({
                responsive: true

            })
                .columns.adjust()
                .responsive.recalc();
        });
    }

    </script>




